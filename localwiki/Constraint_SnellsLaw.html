<html><head><title>Constraint SnellsLaw</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type='text/css' href='wiki.css' rel='stylesheet'></head><body><h1>Constraint SnellsLaw</h1></div>

<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><table class="fcinfobox wikitable ct" >
<tr>
<td class="ctTitle">
<h3><span class="mw-headline" id="Constraint_SnellsLaw"><a href="https://www.freecadweb.org/wiki/index.php?title=File:Constraint_SnellsLaw.png" class="image"><img alt="Constraint SnellsLaw.png" src="32px-Constraint_SnellsLaw.png" width="32" height="32" srcset="/wiki/images/thumb/9/9e/Constraint_SnellsLaw.png/48px-Constraint_SnellsLaw.png 1.5x, /wiki/images/9/9e/Constraint_SnellsLaw.png 2x" /></a> Constraint SnellsLaw</span></h3>
</td></tr>
<tr>
<th class="ctOdd">Menu location
</th></tr>
<tr>
<td class="ctEven">Sketch → Sketcher Constraints → Constrain refraction (Snell's law)
</td></tr>
<tr>
<th class="ctOdd">Workbenches
</th></tr>
<tr>
<td class="ctEven"><a href="Sketcher_Workbench.html" title="Sketcher Workbench">Sketcher</a>, <a href="PartDesign_Workbench.html" title="PartDesign Workbench">PartDesign</a>
</td></tr>
<tr>
<th class="ctOdd">Default shortcut
</th></tr>
<tr>
<td class="ctEven">None
</td></tr>
<tr>
<th class="ctOdd">See also
</th></tr>
<tr>
<td class="ctEven">None
</td></tr>
<tr>
<td class="ctToc"><br /><div id="toc" class="toc"><div class="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Constraint_SnellsLaw"><span class="tocnumber">1</span> <span class="toctext">Constraint SnellsLaw</span></a></li>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">2</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#How_to_use"><span class="tocnumber">3</span> <span class="toctext">How to use</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Remarks"><span class="tocnumber">4</span> <span class="toctext">Remarks</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Scripting"><span class="tocnumber">5</span> <span class="toctext">Scripting</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Version"><span class="tocnumber">6</span> <span class="toctext">Version</span></a></li>
</ul>
</div>

</td></tr></table>
<p><br /> 
</p>
<h2><span class="mw-headline" id="Description">Description</span></h2>
<p>Constrains two lines to follow the law of refraction of light as it penetrates through an interface, where two materials of different refraction indices meet. See <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Snell%27s_law">Snell's law</a> on Wikipedia for more info.
</p>
<div class="thumb tleft"><div class="thumbinner" style="width:202px;"><a href="https://www.freecadweb.org/wiki/index.php?title=File:Snells_law2_witheq.svg" class="image"><img alt="" src="Snells_law2_witheq.svg" width="200" height="359" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://www.freecadweb.org/wiki/index.php?title=File:Snells_law2_witheq.svg" class="internal" title="Enlarge"></a></div>Snell's law</div></div></div>
<div style="clear:both"></div>
<p><br />
</p>
<h2><span class="mw-headline" id="How_to_use">How to use</span></h2>
<div class="thumb tnone"><div class="thumbinner" style="width:502px;"><a href="https://www.freecadweb.org/wiki/index.php?title=File:Sketcher_SnellsLaw_Example1.png" class="image"><img alt="" src="500px-Sketcher_SnellsLaw_Example1.png" width="500" height="218" class="thumbimage" srcset="/wiki/images/thumb/3/30/Sketcher_SnellsLaw_Example1.png/750px-Sketcher_SnellsLaw_Example1.png 1.5x, /wiki/images/thumb/3/30/Sketcher_SnellsLaw_Example1.png/1000px-Sketcher_SnellsLaw_Example1.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://www.freecadweb.org/wiki/index.php?title=File:Sketcher_SnellsLaw_Example1.png" class="internal" title="Enlarge"></a></div>The sequence of clicks is indicated by yellow arrows with numbers. n1, n2 are labeles on this picture to show where the indices of refraction are.</div></div></div>
<ul><li> You'll need two lines that are to follow a beam of light, and a curve to act as an interface. The lines should be on different sides of the interface.</li>
<li> Select the endpoint of one line, an endpoint of another line, and the interface edge. The interface can be a line, circle/arc, ellipse/arc of ellipse. Note the order you've selected the endpoints.</li>
<li> Invoke the constraint. A dialog will appear asking for a ratio of indices of refraction n2/n1. n2 corresponds to the medium where the second selected endpoint's line resides, n1 is for the first line.</li>
<li> The endpoints will be made coincident (if needed), constrained onto the interface (if needed), and the Snell's law will become constrained. </li></ul>
<p>Note that there are several <a href="Sketcher_helper_constraint.html" title="Sketcher helper constraint">helper constraints</a> smart-added (point-on-object, coincident), and they can be deleted if they cause redundancy, or added manually if they were not added automatically. For the actual Snell's law constraint, the endpoints of lines must coincide and lie on the interface, otherwise the behavior is undefined.
</p><p>Using polyline tool, it is possible to speedup drawing of rays of light. In this case, one can select two coincident endpoints by box selection.
</p>
<h2><span class="mw-headline" id="Remarks">Remarks</span></h2>
<ul><li> The actual Snell's law constraint enforces the plain law equation n1*sin(theta1) = n2*sin(theta2). It needs the line ends to be made coincident and on the interface by other constraints. The necessary helper constraints are added automatically based on the current coordinates of the elements.</li>
<li> Python routine does not add the helper constraints. These must be added manually by the script (see example in Scripting section).</li>
<li> These helper constraints can be temporarily deleted and the endpoints dragged apart, which can be useful in case one wants to construct a reflected ray or birefringence rays.</li>
<li> Unlike the reality, refraction indices are associated with rays of light, but not according to the sides of the boundary. This is useful to emulate birefringence, construct paths of different wavelengths due to refraction, and easily construct angle of onset of total internal reflection. </li>
<li> Both rays can be on the same side of the interface, satisfying the constraint equation. This is physical nonsense, unless the ratio n2/n1 is 1.0, in which case the constraint emulates a reflection.</li>
<li> Arcs of circle and ellipse are also accepted as rays (physical nonsense).</li></ul>
<h2><span class="mw-headline" id="Scripting">Scripting</span></h2>
<p>The constraints can be created from <a href="Macros.html" title="Macros">macros</a> and from the python console by using the following function:
</p>
<pre>Sketch.addConstraint(Sketcher.Constraint('SnellsLaw',line1,pointpos1,line2,pointpos2,interface,n2byn1)) </pre>
<p>where:
</p>
<dl><dd><ul><li> <tt>Sketch</tt> is a sketch object</li>
<li> <tt>line1</tt> and <tt>pointpos1</tt> are two integers identifying the endpoint of the line in medium with refractive index of <i>n1</i>. <tt>line1</tt> is the line's index in the sketch (the value, returned by Sketch.addGeometry), and <tt>pointpos1</tt> should be 1 for start point and 2 for end point.</li>
<li> <tt>line2</tt> and <tt>pointpos2</tt> are the indexes specifying the endpoint of the second line (in medium <i>n2</i>)</li>
<li> <tt>n2byn1</tt> is a floating-point number equal to the ratio of refractive indices <i>n2</i>/<i>n1</i></li></ul></dd></dl>
<p>Example:
</p>
<pre>from Sketcher import *
from Part import *
from FreeCAD import *

StartPoint = 1
EndPoint = 2
MiddlePoint = 3

f = App.activeDocument().addObject("Sketcher::SketchObject","Sketch")

# add geometry to the sketch
icir = f.addGeometry(Part.Circle(App.Vector(-547.612366,227.479736,0),App.Vector(0,0,1),68.161979))
iline1 = f.addGeometry(Part.Line(App.Vector(-667.331726,244.127090,0),App.Vector(-604.284241,269.275238,0)))
iline2 = f.addGeometry(Part.Line(App.Vector(-604.284241,269.275238,0),App.Vector(-490.940491,256.878265,0)))
# add constraints
# helper constraints:
f.addConstraint(Sketcher.Constraint('Coincident',iline1,EndPoint,iline2,StartPoint)) 
f.addConstraint(Sketcher.Constraint('PointOnObject',iline1,EndPoint,icir)) 
# the Snell's law:
f.addConstraint(Sketcher.Constraint('SnellsLaw',iline1,EndPoint,iline2,StartPoint,icir,1.47))

App.ActiveDocument.recompute() </pre>
<h2><span class="mw-headline" id="Version">Version</span></h2>
<p>The constraint was introduced in FreeCAD v0.15.4387
</p>
<div style="clear:both"></div>
</div>



</div>

</div><div class="printfooter">
Online version: "<a dir="ltr" href="https://www.freecadweb.org/wiki/index.php?title=Constraint_SnellsLaw&amp;oldid=142266">http://www.freecadweb.org/wiki/index.php?title=Constraint_SnellsLaw&amp;oldid=142266</a>"</div>
<div id="catlinks" class="catlinks" data-mw="interface"></div><div class="visualClear"></div>
</div>
</div>
<div id="mw-navigation">
<h2>Navigation menu</h2>

</body></html>