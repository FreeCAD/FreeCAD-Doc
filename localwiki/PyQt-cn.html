<html><head><title>PyQt/cn</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type='text/css' href='wiki.css' rel='stylesheet'></head><body><h1>PyQt/cn</h1></div>

<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/PyQt">PyQt</a> 是 python 的模块，该模块可以允许 python 程序创建，访问，修改 <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Qt_(toolkit)">Qt</a> 应用程序。您可以用它创建，访问，修改 python 的 Qt 程序，就像 FreeCAD。
</p><p>By using the PyQt module from inside FreeCAD, you have therefore full control over its interface. You can for example:
</p>
<ul><li> Add your own panels, widgets and toolbars</li>
<li> Add or hide elements to existing panels</li>
<li> Change, redirect or add connections between all those elements</li></ul>
<p>PyQt has an extensive <a rel="nofollow" class="external text" href="http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/classes.html">API documentation</a>, and there are many tutorials on the net to teach you how it works.
</p><p>If you want to work on the FreeCAD interface, the very first thing to do is create a reference to the FreeCAD main window:
</p>
<pre>import sys
from PyQt4 import QtGui
app = QtGui.qApp
mw = app.activeWindow()
</pre>
<p>Then, you can for example browse through all the widgets of the interface:
</p>
<pre>for child in mw.children():
   print 'widget name = ', child.objectName(), ', widget type = ', child
</pre>
<p>The widgets in a Qt interface are usually nested into "containers" widgets, so the children of our main window can themselves contain other children. Depending on the widget type, there are a lot of things you can do. Check the API documentation to see what is possible.
</p><p>Adding a new widget, for example a dockWidget (which can be placed in one of FreeCAD's side panels) is easy:
</p>
<pre>myWidget = QtGui.QDockWidget()
mw.addDockWidget(QtCore.Qt.RightDockWidgetArea,myWidget)
</pre>
<p>You could then add stuff directly to your widget:
</p>
<pre>  myWidget.setObjectName("my Nice New Widget")
  myWidget.resize(QtCore.QSize(300,100)) # sets size of the widget
  label = QtGui.QLabel("Hello World", myWidget) # creates a label
  label.setGeometry(QtCore.QRect(50,50,200,24)) # sets its size
  label.setObjectName("myLabel") # sets its name, so it can be found by name
</pre>
<p>But a preferred method is to create a UI object which will do all of the setup of your widget at once. The big advantage is that such an UI object can be <a href="Dialog_creation.html" title="Dialog creation">created graphically</a> with the Qt Designer program. A typical object generated by Qt Designer is like this:
</p>
<pre>class myWidget_Ui(object):
  def setupUi(self, myWidget):
    myWidget.setObjectName("my Nice New Widget")
    myWidget.resize(QtCore.QSize(300,100).expandedTo(myWidget.minimumSizeHint())) # sets size of the widget

    self.label = QtGui.QLabel(myWidget) # creates a label
    self.label.setGeometry(QtCore.QRect(50,50,200,24)) # sets its size
    self.label.setObjectName("label") # sets its name, so it can be found by name

  def retranslateUi(self, draftToolbar): # built-in QT function that manages translations of widgets
    myWidget.setWindowTitle(QtGui.QApplication.translate("myWidget", "My Widget", None, QtGui.QApplication.UnicodeUTF8))
    self.label.setText(QtGui.QApplication.translate("myWidget", "Welcome to my new widget!", None, QtGui.QApplication.UnicodeUTF8))
</pre>
<p>To use it, you just need to apply it to your freshly created widget like this:
</p>
<pre>myNewFreeCADWidget = QtGui.QDockWidget() # create a new dckwidget
myNewFreeCADWidget.ui = myWidget_Ui() # load the Ui script
myNewFreeCADWidget.ui.setupUi(myNewFreeCADWidget) # setup the ui
FCmw.addDockWidget(QtCore.Qt.RightDockWidgetArea,myNewFreeCADWidget) # add the widget to the main window
</pre>

<p><br />
</p>




</div>

</div><div class="printfooter">
Online version: "<a dir="ltr" href="https://www.freecadweb.org/wiki/index.php?title=PyQt/cn&amp;oldid=211449">http://www.freecadweb.org/wiki/index.php?title=PyQt/cn&amp;oldid=211449</a>"</div>
<div id="catlinks" class="catlinks" data-mw="interface"></div><div class="visualClear"></div>
</div>
</div>
<div id="mw-navigation">
<h2>Navigation menu</h2>

</body></html>